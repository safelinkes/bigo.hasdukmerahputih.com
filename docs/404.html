<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>Short URL App</title>
    <script type="text/javascript">
        // 使用 IIFE 模式立即調用裡面的 JavaScript 程式碼
        (function () {
            // 使用 fetch API 來取得 routes.json 短網址對照表
            // 請注意 fetch 不支援 IE 瀏覽器，若你想要有更好的相容性，請改用 XMLHttpRequest
            fetch('routes.json')
                .then(response => response.json())
                .then(routes => {
                    // 取出當前網址中，最後一個 / 之後的值
                    // 以上面的範例來說，就會取道 short-url 這個值
                    var fragment = location.pathname.split('/').pop();
                    // 從 routes.json 中找到該關鍵字所對應到的網址
                    var url = routes[fragment];
                    // 若該關鍵字有設定對應的網址，則轉跳到該網址中，若沒有則回到首頁
                    location.href = url ? url : './index.html';
                });
        })();
    </script>
</head>
</html>
